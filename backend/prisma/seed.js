const { PrismaClient } = require('@prisma/client')
const prisma = new PrismaClient()

async function main() {
  // 1. Создадим записи для классов (4–11):
  const classNumbers = [4, 5, 6, 7, 8, 9, 10, 11]
  const classRecords = []

  for (const num of classNumbers) {
    const createdClass = await prisma.class.create({
      data: { number: num }
    })
    classRecords.push(createdClass)
  }

  // 2. Заранее опишем предметы для каждого класса.
  //    Можно в виде объекта { classNumber: [ "Предмет1", "Предмет2", ... ] }
  const subjectsByClass = {
    4: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Окружаючий світ",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    5: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Природознавство",
      "Іноземна мова",
      "Основи інформатики",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    6: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Природознавство",
      "Іноземна мова",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    7: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Біологія",
      "Фізика",
      "Хімія",
      "Історія України",
      "Географія",
      "Іноземна мова",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    8: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Біологія",
      "Фізика",
      "Хімія",
      "Історія України",
      "Всесвітня історія",
      "Географія",
      "Іноземна мова",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    9: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Біологія",
      "Фізика",
      "Хімія",
      "Історія України",
      "Всесвітня історія",
      "Географія",
      "Іноземна мова",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    10: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Біологія",
      "Фізика",
      "Хімія",
      "Історія України",
      "Всесвітня історія",
      "Географія",
      "Іноземна мова",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ],
    11: [
      "Українська мова",
      "Українська література",
      "Математика",
      "Біологія",
      "Фізика",
      "Хімія",
      "Історія України",
      "Всесвітня історія",
      "Географія",
      "Іноземна мова",
      "Образотворче мистецтво",
      "Музичне мистецтво",
      "Трудове навчання",
      "Фізична культура"
    ]
  }

  // 3. Для каждого класса — добавляем предметы.
  for (const classObj of classRecords) {
    const subjects = subjectsByClass[classObj.number]
    for (const subjName of subjects) {
      // Сначала найдём или создадим Subject
      let subject = await prisma.subject.findFirst({
        where: { name: subjName }
      })

      if (!subject) {
        subject = await prisma.subject.create({
          data: { name: subjName }
        })
      }

      // Создаём связь ClassSubject
      await prisma.classSubject.create({
        data: {
          classId: classObj.id,
          subjectId: subject.id
        }
      })
    }
  }

  console.log("Seeding завершён успешно!")
}

main()
  .catch(e => {
    console.error(e)
    process.exit(1)
  })
  .finally(async () => {
    await prisma.$disconnect()
  })
